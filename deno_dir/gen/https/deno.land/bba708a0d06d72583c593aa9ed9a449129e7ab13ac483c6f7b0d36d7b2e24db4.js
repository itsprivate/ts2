import { notImplemented } from "../_utils.ts";
export function guessHandleType(_fd) {
    notImplemented();
}
export const ALL_PROPERTIES = 0;
export const ONLY_WRITABLE = 1;
export const ONLY_ENUMERABLE = 2;
export const ONLY_CONFIGURABLE = 4;
export const ONLY_ENUM_WRITABLE = 6;
export const SKIP_STRINGS = 8;
export const SKIP_SYMBOLS = 16;
const isNumericLookup = {};
export function isArrayIndex(value) {
    switch (typeof value) {
        case "number":
            return value >= 0 && (value | 0) === value;
        case "string": {
            const result = isNumericLookup[value];
            if (result !== void 0) {
                return result;
            }
            const length = value.length;
            if (length === 0) {
                return isNumericLookup[value] = false;
            }
            let ch = 0;
            let i = 0;
            for (; i < length; ++i) {
                ch = value.charCodeAt(i);
                if (i === 0 && ch === 0x30 && length > 1 ||
                    ch < 0x30 || ch > 0x39) {
                    return isNumericLookup[value] = false;
                }
            }
            return isNumericLookup[value] = true;
        }
        default:
            return false;
    }
}
export function getOwnNonIndexProperties(obj, filter) {
    let allProperties = [
        ...Object.getOwnPropertyNames(obj),
        ...Object.getOwnPropertySymbols(obj),
    ];
    if (Array.isArray(obj)) {
        allProperties = allProperties.filter((k) => !isArrayIndex(k));
    }
    if (filter === ALL_PROPERTIES) {
        return allProperties;
    }
    const result = [];
    for (const key of allProperties) {
        const desc = Object.getOwnPropertyDescriptor(obj, key);
        if (desc === undefined) {
            continue;
        }
        if (filter & ONLY_WRITABLE && !desc.writable) {
            continue;
        }
        if (filter & ONLY_ENUMERABLE && !desc.enumerable) {
            continue;
        }
        if (filter & ONLY_CONFIGURABLE && !desc.configurable) {
            continue;
        }
        if (filter & SKIP_STRINGS && typeof key === "string") {
            continue;
        }
        if (filter & SKIP_SYMBOLS && typeof key === "symbol") {
            continue;
        }
        result.push(key);
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEJBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFFOUMsTUFBTSxVQUFVLGVBQWUsQ0FBQyxHQUFXO0lBQ3pDLGNBQWMsRUFBRSxDQUFDO0FBQ25CLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFDL0IsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFHLENBQUMsQ0FBQztBQUNqQyxNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDbkMsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDO0FBQ3BDLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxDQUFDLENBQUM7QUFDOUIsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLEVBQUUsQ0FBQztBQVkvQixNQUFNLGVBQWUsR0FBNEIsRUFBRSxDQUFDO0FBQ3BELE1BQU0sVUFBVSxZQUFZLENBQUMsS0FBYztJQUN6QyxRQUFRLE9BQU8sS0FBSyxFQUFFO1FBQ3BCLEtBQUssUUFBUTtZQUNYLE9BQU8sS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUM7UUFDN0MsS0FBSyxRQUFRLENBQUMsQ0FBQztZQUNiLE1BQU0sTUFBTSxHQUFHLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN0QyxJQUFJLE1BQU0sS0FBSyxLQUFLLENBQUMsRUFBRTtnQkFDckIsT0FBTyxNQUFNLENBQUM7YUFDZjtZQUNELE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDNUIsSUFBSSxNQUFNLEtBQUssQ0FBQyxFQUFFO2dCQUNoQixPQUFPLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUM7YUFDdkM7WUFDRCxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDWCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDVixPQUFPLENBQUMsR0FBRyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUU7Z0JBQ3RCLEVBQUUsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6QixJQUNFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLElBQUksSUFBSSxNQUFNLEdBQUcsQ0FBQztvQkFDcEMsRUFBRSxHQUFHLElBQUksSUFBWSxFQUFFLEdBQUcsSUFBSSxFQUM5QjtvQkFDQSxPQUFPLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUM7aUJBQ3ZDO2FBQ0Y7WUFDRCxPQUFPLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUM7U0FDdEM7UUFDRDtZQUNFLE9BQU8sS0FBSyxDQUFDO0tBQ2hCO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSx3QkFBd0IsQ0FFdEMsR0FBVyxFQUNYLE1BQWM7SUFFZCxJQUFJLGFBQWEsR0FBRztRQUNsQixHQUFHLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUM7UUFDbEMsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUMsR0FBRyxDQUFDO0tBQ3JDLENBQUM7SUFFRixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDdEIsYUFBYSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDL0Q7SUFFRCxJQUFJLE1BQU0sS0FBSyxjQUFjLEVBQUU7UUFDN0IsT0FBTyxhQUFhLENBQUM7S0FDdEI7SUFFRCxNQUFNLE1BQU0sR0FBd0IsRUFBRSxDQUFDO0lBQ3ZDLEtBQUssTUFBTSxHQUFHLElBQUksYUFBYSxFQUFFO1FBQy9CLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDdkQsSUFBSSxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ3RCLFNBQVM7U0FDVjtRQUNELElBQUksTUFBTSxHQUFHLGFBQWEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDNUMsU0FBUztTQUNWO1FBQ0QsSUFBSSxNQUFNLEdBQUcsZUFBZSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNoRCxTQUFTO1NBQ1Y7UUFDRCxJQUFJLE1BQU0sR0FBRyxpQkFBaUIsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDcEQsU0FBUztTQUNWO1FBQ0QsSUFBSSxNQUFNLEdBQUcsWUFBWSxJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsRUFBRTtZQUNwRCxTQUFTO1NBQ1Y7UUFDRCxJQUFJLE1BQU0sR0FBRyxZQUFZLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1lBQ3BELFNBQVM7U0FDVjtRQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbEI7SUFDRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIFRoaXMgbW9kdWxlIHBvcnRzOlxuLy8gLSBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi9tYXN0ZXIvc3JjL3V0aWwtaW5sLmhcbi8vIC0gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvbWFzdGVyL3NyYy91dGlsLmNjXG4vLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9ibG9iL21hc3Rlci9zcmMvdXRpbC5oXG5cbmltcG9ydCB7IG5vdEltcGxlbWVudGVkIH0gZnJvbSBcIi4uL191dGlscy50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ3Vlc3NIYW5kbGVUeXBlKF9mZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgbm90SW1wbGVtZW50ZWQoKTtcbn1cblxuZXhwb3J0IGNvbnN0IEFMTF9QUk9QRVJUSUVTID0gMDtcbmV4cG9ydCBjb25zdCBPTkxZX1dSSVRBQkxFID0gMTtcbmV4cG9ydCBjb25zdCBPTkxZX0VOVU1FUkFCTEUgPSAyO1xuZXhwb3J0IGNvbnN0IE9OTFlfQ09ORklHVVJBQkxFID0gNDtcbmV4cG9ydCBjb25zdCBPTkxZX0VOVU1fV1JJVEFCTEUgPSA2O1xuZXhwb3J0IGNvbnN0IFNLSVBfU1RSSU5HUyA9IDg7XG5leHBvcnQgY29uc3QgU0tJUF9TWU1CT0xTID0gMTY7XG5cbi8qKlxuICogRWZmaWNpZW50bHkgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHByb3BlcnR5IGtleSBpcyBudW1lcmljXG4gKiAoYW5kIHRodXMgY291bGQgYmUgYW4gYXJyYXkgaW5kZXhlcikgb3Igbm90LlxuICpcbiAqIEFsd2F5cyByZXR1cm5zIHRydWUgZm9yIHZhbHVlcyBvZiB0eXBlIGAnbnVtYmVyJ2AuXG4gKlxuICogT3RoZXJ3aXNlLCBvbmx5IHJldHVybnMgdHJ1ZSBmb3Igc3RyaW5ncyB0aGF0IGNvbnNpc3Qgb25seSBvZiBwb3NpdGl2ZSBpbnRlZ2Vycy5cbiAqXG4gKiBSZXN1bHRzIGFyZSBjYWNoZWQuXG4gKi9cbmNvbnN0IGlzTnVtZXJpY0xvb2t1cDogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5SW5kZXgodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBudW1iZXIgfCBzdHJpbmcge1xuICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgIHJldHVybiB2YWx1ZSA+PSAwICYmICh2YWx1ZSB8IDApID09PSB2YWx1ZTtcbiAgICBjYXNlIFwic3RyaW5nXCI6IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGlzTnVtZXJpY0xvb2t1cFt2YWx1ZV07XG4gICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGlzTnVtZXJpY0xvb2t1cFt2YWx1ZV0gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGxldCBjaCA9IDA7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNoID0gdmFsdWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGkgPT09IDAgJiYgY2ggPT09IDB4MzAgJiYgbGVuZ3RoID4gMSAvKiBtdXN0IG5vdCBzdGFydCB3aXRoIDAgKi8gfHxcbiAgICAgICAgICBjaCA8IDB4MzAgLyogMCAqLyB8fCBjaCA+IDB4MzkgLyogOSAqL1xuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gaXNOdW1lcmljTG9va3VwW3ZhbHVlXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNOdW1lcmljTG9va3VwW3ZhbHVlXSA9IHRydWU7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE93bk5vbkluZGV4UHJvcGVydGllcyhcbiAgLy8gZGVuby1saW50LWlnbm9yZSBiYW4tdHlwZXNcbiAgb2JqOiBvYmplY3QsXG4gIGZpbHRlcjogbnVtYmVyLFxuKTogKHN0cmluZyB8IHN5bWJvbClbXSB7XG4gIGxldCBhbGxQcm9wZXJ0aWVzID0gW1xuICAgIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaiksXG4gICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmopLFxuICBdO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICBhbGxQcm9wZXJ0aWVzID0gYWxsUHJvcGVydGllcy5maWx0ZXIoKGspID0+ICFpc0FycmF5SW5kZXgoaykpO1xuICB9XG5cbiAgaWYgKGZpbHRlciA9PT0gQUxMX1BST1BFUlRJRVMpIHtcbiAgICByZXR1cm4gYWxsUHJvcGVydGllcztcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdDogKHN0cmluZyB8IHN5bWJvbClbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGtleSBvZiBhbGxQcm9wZXJ0aWVzKSB7XG4gICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICAgIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyICYgT05MWV9XUklUQUJMRSAmJiAhZGVzYy53cml0YWJsZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiBPTkxZX0VOVU1FUkFCTEUgJiYgIWRlc2MuZW51bWVyYWJsZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiBPTkxZX0NPTkZJR1VSQUJMRSAmJiAhZGVzYy5jb25maWd1cmFibGUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyICYgU0tJUF9TVFJJTkdTICYmIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyICYgU0tJUF9TWU1CT0xTICYmIHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXN1bHQucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG4iXX0=