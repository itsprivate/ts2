import { Buffer } from "./buffer.ts";
import { encodeStr, hexTable } from "./internal/querystring.ts";
export const decode = parse;
export const encode = stringify;
function qsEscape(str) {
    if (typeof str !== "string") {
        if (typeof str === "object") {
            str = String(str);
        }
        else {
            str += "";
        }
    }
    return encodeStr(str, noEscape, hexTable);
}
export const escape = qsEscape;
const isHexTable = new Int8Array([
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,
    0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
]);
function charCodes(str) {
    const ret = new Array(str.length);
    for (let i = 0; i < str.length; ++i) {
        ret[i] = str.charCodeAt(i);
    }
    return ret;
}
function addKeyVal(obj, key, value, keyEncoded, valEncoded, decode) {
    if (key.length > 0 && keyEncoded) {
        key = decode(key);
    }
    if (value.length > 0 && valEncoded) {
        value = decode(value);
    }
    if (obj[key] === undefined) {
        obj[key] = value;
    }
    else {
        const curValue = obj[key];
        if (curValue.pop) {
            curValue[curValue.length] = value;
        }
        else {
            obj[key] = [curValue, value];
        }
    }
}
export function parse(str, sep = "&", eq = "=", { decodeURIComponent = unescape, maxKeys = 1000 } = {}) {
    const obj = Object.create(null);
    if (typeof str !== "string" || str.length === 0) {
        return obj;
    }
    const sepCodes = (!sep ? [38] : charCodes(String(sep)));
    const eqCodes = (!eq ? [61] : charCodes(String(eq)));
    const sepLen = sepCodes.length;
    const eqLen = eqCodes.length;
    let pairs = 1000;
    if (typeof maxKeys === "number") {
        pairs = maxKeys > 0 ? maxKeys : -1;
    }
    let decode = unescape;
    if (decodeURIComponent) {
        decode = decodeURIComponent;
    }
    const customDecode = (decode !== unescape);
    let lastPos = 0;
    let sepIdx = 0;
    let eqIdx = 0;
    let key = "";
    let value = "";
    let keyEncoded = customDecode;
    let valEncoded = customDecode;
    const plusChar = (customDecode ? "%20" : " ");
    let encodeCheck = 0;
    for (let i = 0; i < str.length; ++i) {
        const code = str.charCodeAt(i);
        if (code === sepCodes[sepIdx]) {
            if (++sepIdx === sepLen) {
                const end = i - sepIdx + 1;
                if (eqIdx < eqLen) {
                    if (lastPos < end) {
                        key += str.slice(lastPos, end);
                    }
                    else if (key.length === 0) {
                        if (--pairs === 0) {
                            return obj;
                        }
                        lastPos = i + 1;
                        sepIdx = eqIdx = 0;
                        continue;
                    }
                }
                else if (lastPos < end) {
                    value += str.slice(lastPos, end);
                }
                addKeyVal(obj, key, value, keyEncoded, valEncoded, decode);
                if (--pairs === 0) {
                    return obj;
                }
                key = value = "";
                encodeCheck = 0;
                lastPos = i + 1;
                sepIdx = eqIdx = 0;
            }
        }
        else {
            sepIdx = 0;
            if (eqIdx < eqLen) {
                if (code === eqCodes[eqIdx]) {
                    if (++eqIdx === eqLen) {
                        const end = i - eqIdx + 1;
                        if (lastPos < end) {
                            key += str.slice(lastPos, end);
                        }
                        encodeCheck = 0;
                        lastPos = i + 1;
                    }
                    continue;
                }
                else {
                    eqIdx = 0;
                    if (!keyEncoded) {
                        if (code === 37) {
                            encodeCheck = 1;
                            continue;
                        }
                        else if (encodeCheck > 0) {
                            if (isHexTable[code] === 1) {
                                if (++encodeCheck === 3) {
                                    keyEncoded = true;
                                }
                                continue;
                            }
                            else {
                                encodeCheck = 0;
                            }
                        }
                    }
                }
                if (code === 43) {
                    if (lastPos < i) {
                        key += str.slice(lastPos, i);
                    }
                    key += plusChar;
                    lastPos = i + 1;
                    continue;
                }
            }
            if (code === 43) {
                if (lastPos < i) {
                    value += str.slice(lastPos, i);
                }
                value += plusChar;
                lastPos = i + 1;
            }
            else if (!valEncoded) {
                if (code === 37) {
                    encodeCheck = 1;
                }
                else if (encodeCheck > 0) {
                    if (isHexTable[code] === 1) {
                        if (++encodeCheck === 3) {
                            valEncoded = true;
                        }
                    }
                    else {
                        encodeCheck = 0;
                    }
                }
            }
        }
    }
    if (lastPos < str.length) {
        if (eqIdx < eqLen) {
            key += str.slice(lastPos);
        }
        else if (sepIdx < sepLen) {
            value += str.slice(lastPos);
        }
    }
    else if (eqIdx === 0 && key.length === 0) {
        return obj;
    }
    addKeyVal(obj, key, value, keyEncoded, valEncoded, decode);
    return obj;
}
const noEscape = new Int8Array([
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,
    0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1,
    0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0,
]);
function stringifyPrimitive(v) {
    if (typeof v === "string") {
        return v;
    }
    if (typeof v === "number" && isFinite(v)) {
        return "" + v;
    }
    if (typeof v === "bigint") {
        return "" + v;
    }
    if (typeof v === "boolean") {
        return v ? "true" : "false";
    }
    return "";
}
function encodeStringifiedCustom(v, encode) {
    return encode(stringifyPrimitive(v));
}
function encodeStringified(v, encode) {
    if (typeof v === "string") {
        return (v.length ? encode(v) : "");
    }
    if (typeof v === "number" && isFinite(v)) {
        return (Math.abs(v) < 1e21 ? "" + v : encode("" + v));
    }
    if (typeof v === "bigint") {
        return "" + v;
    }
    if (typeof v === "boolean") {
        return v ? "true" : "false";
    }
    return "";
}
export function stringify(obj, sep, eq, options) {
    sep ||= "&";
    eq ||= "=";
    const encode = options ? options.encodeURIComponent : qsEscape;
    const convert = options ? encodeStringifiedCustom : encodeStringified;
    if (obj !== null && typeof obj === "object") {
        const keys = Object.keys(obj);
        const len = keys.length;
        let fields = "";
        for (let i = 0; i < len; ++i) {
            const k = keys[i];
            const v = obj[k];
            let ks = convert(k, encode);
            ks += eq;
            if (Array.isArray(v)) {
                const vlen = v.length;
                if (vlen === 0)
                    continue;
                if (fields) {
                    fields += sep;
                }
                for (let j = 0; j < vlen; ++j) {
                    if (j) {
                        fields += sep;
                    }
                    fields += ks;
                    fields += convert(v[j], encode);
                }
            }
            else {
                if (fields) {
                    fields += sep;
                }
                fields += ks;
                fields += convert(v, encode);
            }
        }
        return fields;
    }
    return "";
}
const unhexTable = new Int8Array([
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    +0, +1, +2, +3, +4, +5, +6, +7, +8, +9, -1, -1, -1, -1, -1, -1,
    -1, 10, 11, 12, 13, 14, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, 10, 11, 12, 13, 14, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
]);
export function unescapeBuffer(s, decodeSpaces = false) {
    const out = new Buffer(s.length);
    let index = 0;
    let outIndex = 0;
    let currentChar;
    let nextChar;
    let hexHigh;
    let hexLow;
    const maxLength = s.length - 2;
    let hasHex = false;
    while (index < s.length) {
        currentChar = s.charCodeAt(index);
        if (currentChar === 43 && decodeSpaces) {
            out[outIndex++] = 32;
            index++;
            continue;
        }
        if (currentChar === 37 && index < maxLength) {
            currentChar = s.charCodeAt(++index);
            hexHigh = unhexTable[currentChar];
            if (!(hexHigh >= 0)) {
                out[outIndex++] = 37;
                continue;
            }
            else {
                nextChar = s.charCodeAt(++index);
                hexLow = unhexTable[nextChar];
                if (!(hexLow >= 0)) {
                    out[outIndex++] = 37;
                    index--;
                }
                else {
                    hasHex = true;
                    currentChar = hexHigh * 16 + hexLow;
                }
            }
        }
        out[outIndex++] = currentChar;
        index++;
    }
    return hasHex ? out.slice(0, outIndex) : out;
}
function qsUnescape(s) {
    try {
        return decodeURIComponent(s);
    }
    catch {
        return unescapeBuffer(s).toString();
    }
}
export const unescape = qsUnescape;
export default {
    parse,
    stringify,
    decode,
    encode,
    unescape,
    escape,
    unescapeBuffer,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnlzdHJpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJxdWVyeXN0cmluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFNaEUsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQztBQU01QixNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDO0FBTWhDLFNBQVMsUUFBUSxDQUFDLEdBQVk7SUFDNUIsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7UUFDM0IsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7WUFDM0IsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNuQjthQUFNO1lBQ0wsR0FBRyxJQUFJLEVBQUUsQ0FBQztTQUNYO0tBQ0Y7SUFDRCxPQUFPLFNBQVMsQ0FBQyxHQUFhLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFTRCxNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDO0FBYy9CLE1BQU0sVUFBVSxHQUFHLElBQUksU0FBUyxDQUFDO0lBQy9CLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDOUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUM5QyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzlDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDOUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUM5QyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzlDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDOUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUM5QyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzlDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDOUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUM5QyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzlDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7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QUssRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRTNELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQWdCRCxNQUFNLFFBQVEsR0FBRyxJQUFJLFNBQVMsQ0FBQztJQUM3QixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzlDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDOUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUM5QyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzlDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUs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RUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFB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a0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDOUI7SUFBQyxNQUFNO1FBQ04sT0FBTyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDckM7QUFDSCxDQUFDO0FBU0QsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQztBQUVuQyxlQUFlO0lBQ2IsS0FBSztJQUNMLFNBQVM7SUFDVCxNQUFNO0lBQ04sTUFBTTtJQUNOLFFBQVE7SUFDUixNQUFNO0lBQ04sY0FBYztDQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIxIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcIi4vYnVmZmVyLnRzXCI7XG5pbXBvcnQgeyBlbmNvZGVTdHIsIGhleFRhYmxlIH0gZnJvbSBcIi4vaW50ZXJuYWwvcXVlcnlzdHJpbmcudHNcIjtcblxuLyoqXG4gKiBBbGlhcyBvZiBxdWVyeXN0cmluZy5wYXJzZSgpXG4gKiBAbGVnYWN5XG4gKi9cbmV4cG9ydCBjb25zdCBkZWNvZGUgPSBwYXJzZTtcblxuLyoqXG4gKiBBbGlhcyBvZiBxdWVyeXN0cmluZy5zdHJpbmdpZnkoKVxuICogQGxlZ2FjeVxuICovXG5leHBvcnQgY29uc3QgZW5jb2RlID0gc3RyaW5naWZ5O1xuXG4vKipcbiAqIHJlcGxhY2VzIGVuY29kZVVSSUNvbXBvbmVudCgpXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zLjRcbiAqL1xuZnVuY3Rpb24gcXNFc2NhcGUoc3RyOiB1bmtub3duKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgc3RyID0gU3RyaW5nKHN0cik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSBcIlwiO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZW5jb2RlU3RyKHN0ciBhcyBzdHJpbmcsIG5vRXNjYXBlLCBoZXhUYWJsZSk7XG59XG5cbi8qKlxuICogUGVyZm9ybXMgVVJMIHBlcmNlbnQtZW5jb2Rpbmcgb24gdGhlIGdpdmVuIGBzdHJgIGluIGEgbWFubmVyIHRoYXQgaXMgb3B0aW1pemVkIGZvciB0aGUgc3BlY2lmaWMgcmVxdWlyZW1lbnRzIG9mIFVSTCBxdWVyeSBzdHJpbmdzLlxuICogVXNlZCBieSBgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KClgIGFuZCBpcyBnZW5lcmFsbHkgbm90IGV4cGVjdGVkIHRvIGJlIHVzZWQgZGlyZWN0bHkuXG4gKiBJdCBpcyBleHBvcnRlZCBwcmltYXJpbHkgdG8gYWxsb3cgYXBwbGljYXRpb24gY29kZSB0byBwcm92aWRlIGEgcmVwbGFjZW1lbnQgcGVyY2VudC1lbmNvZGluZyBpbXBsZW1lbnRhdGlvbiBpZiBuZWNlc3NhcnkgYnkgYXNzaWduaW5nIGBxdWVyeXN0cmluZy5lc2NhcGVgIHRvIGFuIGFsdGVybmF0aXZlIGZ1bmN0aW9uLlxuICogQGxlZ2FjeVxuICogQHNlZSBUZXN0ZWQgaW4gYHRlc3QtcXVlcnlzdHJpbmctZXNjYXBlLmpzYFxuICovXG5leHBvcnQgY29uc3QgZXNjYXBlID0gcXNFc2NhcGU7XG5cbmludGVyZmFjZSBQYXJzZWRVcmxRdWVyeSB7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xufVxuXG5pbnRlcmZhY2UgUGFyc2VPcHRpb25zIHtcbiAgLyoqIFRoZSBmdW5jdGlvbiB0byB1c2Ugd2hlbiBkZWNvZGluZyBwZXJjZW50LWVuY29kZWQgY2hhcmFjdGVycyBpbiB0aGUgcXVlcnkgc3RyaW5nLiAqL1xuICBkZWNvZGVVUklDb21wb25lbnQ/OiAoc3RyaW5nOiBzdHJpbmcpID0+IHN0cmluZztcbiAgLyoqIFNwZWNpZmllcyB0aGUgbWF4aW11bSBudW1iZXIgb2Yga2V5cyB0byBwYXJzZS4gKi9cbiAgbWF4S2V5cz86IG51bWJlcjtcbn1cblxuLy8gZGVuby1mbXQtaWdub3JlXG5jb25zdCBpc0hleFRhYmxlID0gbmV3IEludDhBcnJheShbXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDAgLSAxNVxuICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyAxNiAtIDMxXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDMyIC0gNDdcbiAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gNDggLSA2M1xuICAwLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyA2NCAtIDc5XG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDgwIC0gOTVcbiAgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gOTYgLSAxMTFcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gMTEyIC0gMTI3XG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDEyOCAuLi5cbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgIC8vIC4uLiAyNTZcbl0pO1xuXG5mdW5jdGlvbiBjaGFyQ29kZXMoc3RyOiBzdHJpbmcpOiBudW1iZXJbXSB7XG4gIGNvbnN0IHJldCA9IG5ldyBBcnJheShzdHIubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICByZXRbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBhZGRLZXlWYWwoXG4gIG9iajogUGFyc2VkVXJsUXVlcnksXG4gIGtleTogc3RyaW5nLFxuICB2YWx1ZTogc3RyaW5nLFxuICBrZXlFbmNvZGVkOiBib29sZWFuLFxuICB2YWxFbmNvZGVkOiBib29sZWFuLFxuICBkZWNvZGU6IChlbmNvZGVkVVJJQ29tcG9uZW50OiBzdHJpbmcpID0+IHN0cmluZyxcbik6IHZvaWQge1xuICBpZiAoa2V5Lmxlbmd0aCA+IDAgJiYga2V5RW5jb2RlZCkge1xuICAgIGtleSA9IGRlY29kZShrZXkpO1xuICB9XG4gIGlmICh2YWx1ZS5sZW5ndGggPiAwICYmIHZhbEVuY29kZWQpIHtcbiAgICB2YWx1ZSA9IGRlY29kZSh2YWx1ZSk7XG4gIH1cblxuICBpZiAob2JqW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY3VyVmFsdWUgPSBvYmpba2V5XTtcbiAgICAvLyBBIHNpbXBsZSBBcnJheS1zcGVjaWZpYyBwcm9wZXJ0eSBjaGVjayBpcyBlbm91Z2ggaGVyZSB0b1xuICAgIC8vIGRpc3Rpbmd1aXNoIGZyb20gYSBzdHJpbmcgdmFsdWUgYW5kIGlzIGZhc3RlciBhbmQgc3RpbGwgc2FmZVxuICAgIC8vIHNpbmNlIHdlIGFyZSBnZW5lcmF0aW5nIGFsbCBvZiB0aGUgdmFsdWVzIGJlaW5nIGFzc2lnbmVkLlxuICAgIGlmICgoY3VyVmFsdWUgYXMgc3RyaW5nW10pLnBvcCkge1xuICAgICAgKGN1clZhbHVlIGFzIHN0cmluZ1tdKVtjdXJWYWx1ZSEubGVuZ3RoXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba2V5XSA9IFtjdXJWYWx1ZSBhcyBzdHJpbmcsIHZhbHVlXTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZXMgYSBVUkwgcXVlcnkgc3RyaW5nIGludG8gYSBjb2xsZWN0aW9uIG9mIGtleSBhbmQgdmFsdWUgcGFpcnMuXG4gKiBAcGFyYW0gc3RyIFRoZSBVUkwgcXVlcnkgc3RyaW5nIHRvIHBhcnNlXG4gKiBAcGFyYW0gc2VwIFRoZSBzdWJzdHJpbmcgdXNlZCB0byBkZWxpbWl0IGtleSBhbmQgdmFsdWUgcGFpcnMgaW4gdGhlIHF1ZXJ5IHN0cmluZy4gRGVmYXVsdDogJyYnLlxuICogQHBhcmFtIGVxIFRoZSBzdWJzdHJpbmcgdXNlZCB0byBkZWxpbWl0IGtleXMgYW5kIHZhbHVlcyBpbiB0aGUgcXVlcnkgc3RyaW5nLiBEZWZhdWx0OiAnPScuXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgcGFyc2Ugb3B0aW9uc1xuICogQHBhcmFtIG9wdGlvbnMuZGVjb2RlVVJJQ29tcG9uZW50IFRoZSBmdW5jdGlvbiB0byB1c2Ugd2hlbiBkZWNvZGluZyBwZXJjZW50LWVuY29kZWQgY2hhcmFjdGVycyBpbiB0aGUgcXVlcnkgc3RyaW5nLiBEZWZhdWx0OiBgcXVlcnlzdHJpbmcudW5lc2NhcGUoKWAuXG4gKiBAcGFyYW0gb3B0aW9ucy5tYXhLZXlzIFNwZWNpZmllcyB0aGUgbWF4aW11bSBudW1iZXIgb2Yga2V5cyB0byBwYXJzZS4gU3BlY2lmeSBgMGAgdG8gcmVtb3ZlIGtleSBjb3VudGluZyBsaW1pdGF0aW9ucy4gRGVmYXVsdDogYDEwMDBgLlxuICogQGxlZ2FjeVxuICogQHNlZSBUZXN0ZWQgaW4gdGVzdC1xdWVyeXN0cmluZy5qc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2UoXG4gIHN0cjogc3RyaW5nLFxuICBzZXAgPSBcIiZcIixcbiAgZXEgPSBcIj1cIixcbiAgeyBkZWNvZGVVUklDb21wb25lbnQgPSB1bmVzY2FwZSwgbWF4S2V5cyA9IDEwMDAgfTogUGFyc2VPcHRpb25zID0ge30sXG4pOiBQYXJzZWRVcmxRdWVyeSB7XG4gIGNvbnN0IG9iajogUGFyc2VkVXJsUXVlcnkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiIHx8IHN0ci5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgY29uc3Qgc2VwQ29kZXMgPSAoIXNlcCA/IFszOF0gLyogJiAqLyA6IGNoYXJDb2RlcyhTdHJpbmcoc2VwKSkpO1xuICBjb25zdCBlcUNvZGVzID0gKCFlcSA/IFs2MV0gLyogPSAqLyA6IGNoYXJDb2RlcyhTdHJpbmcoZXEpKSk7XG4gIGNvbnN0IHNlcExlbiA9IHNlcENvZGVzLmxlbmd0aDtcbiAgY29uc3QgZXFMZW4gPSBlcUNvZGVzLmxlbmd0aDtcblxuICBsZXQgcGFpcnMgPSAxMDAwO1xuICBpZiAodHlwZW9mIG1heEtleXMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAvLyAtMSBpcyB1c2VkIGluIHBsYWNlIG9mIGEgdmFsdWUgbGlrZSBJbmZpbml0eSBmb3IgbWVhbmluZ1xuICAgIC8vIFwidW5saW1pdGVkIHBhaXJzXCIgYmVjYXVzZSBvZiBhZGRpdGlvbmFsIGNoZWNrcyBWOCAoYXQgbGVhc3QgYXMgb2YgdjUuNClcbiAgICAvLyBoYXMgdG8gZG8gd2hlbiB1c2luZyB2YXJpYWJsZXMgdGhhdCBjb250YWluIHZhbHVlcyBsaWtlIEluZmluaXR5LiBTaW5jZVxuICAgIC8vIGBwYWlyc2AgaXMgYWx3YXlzIGRlY3JlbWVudGVkIGFuZCBjaGVja2VkIGV4cGxpY2l0bHkgZm9yIDAsIC0xIHdvcmtzXG4gICAgLy8gZWZmZWN0aXZlbHkgdGhlIHNhbWUgYXMgSW5maW5pdHksIHdoaWxlIHByb3ZpZGluZyBhIHNpZ25pZmljYW50XG4gICAgLy8gcGVyZm9ybWFuY2UgYm9vc3QuXG4gICAgcGFpcnMgPSBtYXhLZXlzID4gMCA/IG1heEtleXMgOiAtMTtcbiAgfVxuXG4gIGxldCBkZWNvZGUgPSB1bmVzY2FwZTtcbiAgaWYgKGRlY29kZVVSSUNvbXBvbmVudCkge1xuICAgIGRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcbiAgfVxuICBjb25zdCBjdXN0b21EZWNvZGUgPSAoZGVjb2RlICE9PSB1bmVzY2FwZSk7XG5cbiAgbGV0IGxhc3RQb3MgPSAwO1xuICBsZXQgc2VwSWR4ID0gMDtcbiAgbGV0IGVxSWR4ID0gMDtcbiAgbGV0IGtleSA9IFwiXCI7XG4gIGxldCB2YWx1ZSA9IFwiXCI7XG4gIGxldCBrZXlFbmNvZGVkID0gY3VzdG9tRGVjb2RlO1xuICBsZXQgdmFsRW5jb2RlZCA9IGN1c3RvbURlY29kZTtcbiAgY29uc3QgcGx1c0NoYXIgPSAoY3VzdG9tRGVjb2RlID8gXCIlMjBcIiA6IFwiIFwiKTtcbiAgbGV0IGVuY29kZUNoZWNrID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAvLyBUcnkgbWF0Y2hpbmcga2V5L3ZhbHVlIHBhaXIgc2VwYXJhdG9yIChlLmcuICcmJylcbiAgICBpZiAoY29kZSA9PT0gc2VwQ29kZXNbc2VwSWR4XSkge1xuICAgICAgaWYgKCsrc2VwSWR4ID09PSBzZXBMZW4pIHtcbiAgICAgICAgLy8gS2V5L3ZhbHVlIHBhaXIgc2VwYXJhdG9yIG1hdGNoIVxuICAgICAgICBjb25zdCBlbmQgPSBpIC0gc2VwSWR4ICsgMTtcbiAgICAgICAgaWYgKGVxSWR4IDwgZXFMZW4pIHtcbiAgICAgICAgICAvLyBXZSBkaWRuJ3QgZmluZCB0aGUgKGVudGlyZSkga2V5L3ZhbHVlIHNlcGFyYXRvclxuICAgICAgICAgIGlmIChsYXN0UG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAvLyBUcmVhdCB0aGUgc3Vic3RyaW5nIGFzIHBhcnQgb2YgdGhlIGtleSBpbnN0ZWFkIG9mIHRoZSB2YWx1ZVxuICAgICAgICAgICAga2V5ICs9IHN0ci5zbGljZShsYXN0UG9zLCBlbmQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoa2V5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gV2Ugc2F3IGFuIGVtcHR5IHN1YnN0cmluZyBiZXR3ZWVuIHNlcGFyYXRvcnNcbiAgICAgICAgICAgIGlmICgtLXBhaXJzID09PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0UG9zID0gaSArIDE7XG4gICAgICAgICAgICBzZXBJZHggPSBlcUlkeCA9IDA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGFzdFBvcyA8IGVuZCkge1xuICAgICAgICAgIHZhbHVlICs9IHN0ci5zbGljZShsYXN0UG9zLCBlbmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkS2V5VmFsKG9iaiwga2V5LCB2YWx1ZSwga2V5RW5jb2RlZCwgdmFsRW5jb2RlZCwgZGVjb2RlKTtcblxuICAgICAgICBpZiAoLS1wYWlycyA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAga2V5ID0gdmFsdWUgPSBcIlwiO1xuICAgICAgICBlbmNvZGVDaGVjayA9IDA7XG4gICAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgICAgc2VwSWR4ID0gZXFJZHggPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXBJZHggPSAwO1xuICAgICAgLy8gVHJ5IG1hdGNoaW5nIGtleS92YWx1ZSBzZXBhcmF0b3IgKGUuZy4gJz0nKSBpZiB3ZSBoYXZlbid0IGFscmVhZHlcbiAgICAgIGlmIChlcUlkeCA8IGVxTGVuKSB7XG4gICAgICAgIGlmIChjb2RlID09PSBlcUNvZGVzW2VxSWR4XSkge1xuICAgICAgICAgIGlmICgrK2VxSWR4ID09PSBlcUxlbikge1xuICAgICAgICAgICAgLy8gS2V5L3ZhbHVlIHNlcGFyYXRvciBtYXRjaCFcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IGkgLSBlcUlkeCArIDE7XG4gICAgICAgICAgICBpZiAobGFzdFBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICBrZXkgKz0gc3RyLnNsaWNlKGxhc3RQb3MsIGVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmNvZGVDaGVjayA9IDA7XG4gICAgICAgICAgICBsYXN0UG9zID0gaSArIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVxSWR4ID0gMDtcbiAgICAgICAgICBpZiAoIWtleUVuY29kZWQpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBtYXRjaCBhbiAodmFsaWQpIGVuY29kZWQgYnl0ZSBvbmNlIHRvIG1pbmltaXplIHVubmVjZXNzYXJ5XG4gICAgICAgICAgICAvLyBjYWxscyB0byBzdHJpbmcgZGVjb2RpbmcgZnVuY3Rpb25zXG4gICAgICAgICAgICBpZiAoY29kZSA9PT0gMzcgLyogJSAqLykge1xuICAgICAgICAgICAgICBlbmNvZGVDaGVjayA9IDE7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmNvZGVDaGVjayA+IDApIHtcbiAgICAgICAgICAgICAgaWYgKGlzSGV4VGFibGVbY29kZV0gPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoKytlbmNvZGVDaGVjayA9PT0gMykge1xuICAgICAgICAgICAgICAgICAga2V5RW5jb2RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuY29kZUNoZWNrID0gMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZSA9PT0gNDMgLyogKyAqLykge1xuICAgICAgICAgIGlmIChsYXN0UG9zIDwgaSkge1xuICAgICAgICAgICAga2V5ICs9IHN0ci5zbGljZShsYXN0UG9zLCBpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5ICs9IHBsdXNDaGFyO1xuICAgICAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNvZGUgPT09IDQzIC8qICsgKi8pIHtcbiAgICAgICAgaWYgKGxhc3RQb3MgPCBpKSB7XG4gICAgICAgICAgdmFsdWUgKz0gc3RyLnNsaWNlKGxhc3RQb3MsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlICs9IHBsdXNDaGFyO1xuICAgICAgICBsYXN0UG9zID0gaSArIDE7XG4gICAgICB9IGVsc2UgaWYgKCF2YWxFbmNvZGVkKSB7XG4gICAgICAgIC8vIFRyeSB0byBtYXRjaCBhbiAodmFsaWQpIGVuY29kZWQgYnl0ZSAob25jZSkgdG8gbWluaW1pemUgdW5uZWNlc3NhcnlcbiAgICAgICAgLy8gY2FsbHMgdG8gc3RyaW5nIGRlY29kaW5nIGZ1bmN0aW9uc1xuICAgICAgICBpZiAoY29kZSA9PT0gMzcgLyogJSAqLykge1xuICAgICAgICAgIGVuY29kZUNoZWNrID0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChlbmNvZGVDaGVjayA+IDApIHtcbiAgICAgICAgICBpZiAoaXNIZXhUYWJsZVtjb2RlXSA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKCsrZW5jb2RlQ2hlY2sgPT09IDMpIHtcbiAgICAgICAgICAgICAgdmFsRW5jb2RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVuY29kZUNoZWNrID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBEZWFsIHdpdGggYW55IGxlZnRvdmVyIGtleSBvciB2YWx1ZSBkYXRhXG4gIGlmIChsYXN0UG9zIDwgc3RyLmxlbmd0aCkge1xuICAgIGlmIChlcUlkeCA8IGVxTGVuKSB7XG4gICAgICBrZXkgKz0gc3RyLnNsaWNlKGxhc3RQb3MpO1xuICAgIH0gZWxzZSBpZiAoc2VwSWR4IDwgc2VwTGVuKSB7XG4gICAgICB2YWx1ZSArPSBzdHIuc2xpY2UobGFzdFBvcyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGVxSWR4ID09PSAwICYmIGtleS5sZW5ndGggPT09IDApIHtcbiAgICAvLyBXZSBlbmRlZCBvbiBhbiBlbXB0eSBzdWJzdHJpbmdcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgYWRkS2V5VmFsKG9iaiwga2V5LCB2YWx1ZSwga2V5RW5jb2RlZCwgdmFsRW5jb2RlZCwgZGVjb2RlKTtcblxuICByZXR1cm4gb2JqO1xufVxuXG5pbnRlcmZhY2UgU3RyaW5naWZ5T3B0aW9ucyB7XG4gIC8qKiBUaGUgZnVuY3Rpb24gdG8gdXNlIHdoZW4gY29udmVydGluZyBVUkwtdW5zYWZlIGNoYXJhY3RlcnMgdG8gcGVyY2VudC1lbmNvZGluZyBpbiB0aGUgcXVlcnkgc3RyaW5nLiAqL1xuICBlbmNvZGVVUklDb21wb25lbnQ6IChzdHJpbmc6IHN0cmluZykgPT4gc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZXNlIGNoYXJhY3RlcnMgZG8gbm90IG5lZWQgZXNjYXBpbmcgd2hlbiBnZW5lcmF0aW5nIHF1ZXJ5IHN0cmluZ3M6XG4gKiAhIC0gLiBfIH5cbiAqICcgKCApICpcbiAqIGRpZ2l0c1xuICogYWxwaGEgKHVwcGVyY2FzZSlcbiAqIGFscGhhIChsb3dlcmNhc2UpXG4gKi9cbi8vIGRlbm8tZm10LWlnbm9yZVxuY29uc3Qgbm9Fc2NhcGUgPSBuZXcgSW50OEFycmF5KFtcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gMCAtIDE1XG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDE2IC0gMzFcbiAgMCwgMSwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMCwgMCwgMSwgMSwgMCwgLy8gMzIgLSA0N1xuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyA0OCAtIDYzXG4gIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIC8vIDY0IC0gNzlcbiAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMSwgLy8gODAgLSA5NVxuICAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAvLyA5NiAtIDExMVxuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAxLCAwLCAgLy8gMTEyIC0gMTI3XG5dKTtcblxuLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIHN0cmluZ2lmeVByaW1pdGl2ZSh2OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdjtcbiAgfVxuICBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodikpIHtcbiAgICByZXR1cm4gXCJcIiArIHY7XG4gIH1cbiAgaWYgKHR5cGVvZiB2ID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIFwiXCIgKyB2O1xuICB9XG4gIGlmICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIHtcbiAgICByZXR1cm4gdiA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVTdHJpbmdpZmllZEN1c3RvbShcbiAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgdjogYW55LFxuICBlbmNvZGU6IChzdHJpbmc6IHN0cmluZykgPT4gc3RyaW5nLFxuKTogc3RyaW5nIHtcbiAgcmV0dXJuIGVuY29kZShzdHJpbmdpZnlQcmltaXRpdmUodikpO1xufVxuXG4vLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gZW5jb2RlU3RyaW5naWZpZWQodjogYW55LCBlbmNvZGU6IChzdHJpbmc6IHN0cmluZykgPT4gc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuICh2Lmxlbmd0aCA/IGVuY29kZSh2KSA6IFwiXCIpO1xuICB9XG4gIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIiAmJiBpc0Zpbml0ZSh2KSkge1xuICAgIC8vIFZhbHVlcyA+PSAxZTIxIGF1dG9tYXRpY2FsbHkgc3dpdGNoIHRvIHNjaWVudGlmaWMgbm90YXRpb24gd2hpY2ggcmVxdWlyZXNcbiAgICAvLyBlc2NhcGluZyBkdWUgdG8gdGhlIGluY2x1c2lvbiBvZiBhICcrJyBpbiB0aGUgb3V0cHV0XG4gICAgcmV0dXJuIChNYXRoLmFicyh2KSA8IDFlMjEgPyBcIlwiICsgdiA6IGVuY29kZShcIlwiICsgdikpO1xuICB9XG4gIGlmICh0eXBlb2YgdiA9PT0gXCJiaWdpbnRcIikge1xuICAgIHJldHVybiBcIlwiICsgdjtcbiAgfVxuICBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIHYgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn1cblxuLyoqXG4gKiBQcm9kdWNlcyBhIFVSTCBxdWVyeSBzdHJpbmcgZnJvbSBhIGdpdmVuIG9iaiBieSBpdGVyYXRpbmcgdGhyb3VnaCB0aGUgb2JqZWN0J3MgXCJvd24gcHJvcGVydGllc1wiLlxuICogQHBhcmFtIG9iaiBUaGUgb2JqZWN0IHRvIHNlcmlhbGl6ZSBpbnRvIGEgVVJMIHF1ZXJ5IHN0cmluZy5cbiAqIEBwYXJhbSBzZXAgVGhlIHN1YnN0cmluZyB1c2VkIHRvIGRlbGltaXQga2V5IGFuZCB2YWx1ZSBwYWlycyBpbiB0aGUgcXVlcnkgc3RyaW5nLiBEZWZhdWx0OiAnJicuXG4gKiBAcGFyYW0gZXEgVGhlIHN1YnN0cmluZyB1c2VkIHRvIGRlbGltaXQga2V5cyBhbmQgdmFsdWVzIGluIHRoZSBxdWVyeSBzdHJpbmcuIERlZmF1bHQ6ICc9Jy5cbiAqIEBwYXJhbSBvcHRpb25zIFRoZSBzdHJpbmdpZnkgb3B0aW9uc1xuICogQHBhcmFtIG9wdGlvbnMuZW5jb2RlVVJJQ29tcG9uZW50IFRoZSBmdW5jdGlvbiB0byB1c2Ugd2hlbiBjb252ZXJ0aW5nIFVSTC11bnNhZmUgY2hhcmFjdGVycyB0byBwZXJjZW50LWVuY29kaW5nIGluIHRoZSBxdWVyeSBzdHJpbmcuIERlZmF1bHQ6IGBxdWVyeXN0cmluZy5lc2NhcGUoKWAuXG4gKiBAbGVnYWN5XG4gKiBAc2VlIFRlc3RlZCBpbiBgdGVzdC1xdWVyeXN0cmluZy5qc2BcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShcbiAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgb2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICBzZXA/OiBzdHJpbmcsXG4gIGVxPzogc3RyaW5nLFxuICBvcHRpb25zPzogU3RyaW5naWZ5T3B0aW9ucyxcbik6IHN0cmluZyB7XG4gIHNlcCB8fD0gXCImXCI7XG4gIGVxIHx8PSBcIj1cIjtcbiAgY29uc3QgZW5jb2RlID0gb3B0aW9ucyA/IG9wdGlvbnMuZW5jb2RlVVJJQ29tcG9uZW50IDogcXNFc2NhcGU7XG4gIGNvbnN0IGNvbnZlcnQgPSBvcHRpb25zID8gZW5jb2RlU3RyaW5naWZpZWRDdXN0b20gOiBlbmNvZGVTdHJpbmdpZmllZDtcblxuICBpZiAob2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBsZXQgZmllbGRzID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjb25zdCBrID0ga2V5c1tpXTtcbiAgICAgIGNvbnN0IHYgPSBvYmpba107XG4gICAgICBsZXQga3MgPSBjb252ZXJ0KGssIGVuY29kZSk7XG4gICAgICBrcyArPSBlcTtcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgY29uc3QgdmxlbiA9IHYubGVuZ3RoO1xuICAgICAgICBpZiAodmxlbiA9PT0gMCkgY29udGludWU7XG4gICAgICAgIGlmIChmaWVsZHMpIHtcbiAgICAgICAgICBmaWVsZHMgKz0gc2VwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmxlbjsgKytqKSB7XG4gICAgICAgICAgaWYgKGopIHtcbiAgICAgICAgICAgIGZpZWxkcyArPSBzZXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZpZWxkcyArPSBrcztcbiAgICAgICAgICBmaWVsZHMgKz0gY29udmVydCh2W2pdLCBlbmNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZmllbGRzKSB7XG4gICAgICAgICAgZmllbGRzICs9IHNlcDtcbiAgICAgICAgfVxuICAgICAgICBmaWVsZHMgKz0ga3M7XG4gICAgICAgIGZpZWxkcyArPSBjb252ZXJ0KHYsIGVuY29kZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaWVsZHM7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5cbi8vIGRlbm8tZm10LWlnbm9yZVxuY29uc3QgdW5oZXhUYWJsZSA9IG5ldyBJbnQ4QXJyYXkoW1xuICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLy8gMCAtIDE1XG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyAxNiAtIDMxXG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyAzMiAtIDQ3XG4gICswLCArMSwgKzIsICszLCArNCwgKzUsICs2LCArNywgKzgsICs5LCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyA0OCAtIDYzXG4gIC0xLCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1LCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyA2NCAtIDc5XG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyA4MCAtIDk1XG4gIC0xLCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1LCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyA5NiAtIDExMVxuICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLy8gMTEyIC0gMTI3XG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyAxMjggLi4uXG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLFxuICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSxcbiAgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsXG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLFxuICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSxcbiAgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsXG4gIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAvLyAuLi4gMjU1XG5dKTtcblxuLyoqXG4gKiBBIHNhZmUgZmFzdCBhbHRlcm5hdGl2ZSB0byBkZWNvZGVVUklDb21wb25lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuZXNjYXBlQnVmZmVyKHM6IHN0cmluZywgZGVjb2RlU3BhY2VzID0gZmFsc2UpOiBCdWZmZXIge1xuICBjb25zdCBvdXQgPSBuZXcgQnVmZmVyKHMubGVuZ3RoKTtcbiAgbGV0IGluZGV4ID0gMDtcbiAgbGV0IG91dEluZGV4ID0gMDtcbiAgbGV0IGN1cnJlbnRDaGFyO1xuICBsZXQgbmV4dENoYXI7XG4gIGxldCBoZXhIaWdoO1xuICBsZXQgaGV4TG93O1xuICBjb25zdCBtYXhMZW5ndGggPSBzLmxlbmd0aCAtIDI7XG4gIC8vIEZsYWcgdG8ga25vdyBpZiBzb21lIGhleCBjaGFycyBoYXZlIGJlZW4gZGVjb2RlZFxuICBsZXQgaGFzSGV4ID0gZmFsc2U7XG4gIHdoaWxlIChpbmRleCA8IHMubGVuZ3RoKSB7XG4gICAgY3VycmVudENoYXIgPSBzLmNoYXJDb2RlQXQoaW5kZXgpO1xuICAgIGlmIChjdXJyZW50Q2hhciA9PT0gNDMgLyogJysnICovICYmIGRlY29kZVNwYWNlcykge1xuICAgICAgb3V0W291dEluZGV4KytdID0gMzI7IC8vICcgJ1xuICAgICAgaW5kZXgrKztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY3VycmVudENoYXIgPT09IDM3IC8qICclJyAqLyAmJiBpbmRleCA8IG1heExlbmd0aCkge1xuICAgICAgY3VycmVudENoYXIgPSBzLmNoYXJDb2RlQXQoKytpbmRleCk7XG4gICAgICBoZXhIaWdoID0gdW5oZXhUYWJsZVtjdXJyZW50Q2hhcl07XG4gICAgICBpZiAoIShoZXhIaWdoID49IDApKSB7XG4gICAgICAgIG91dFtvdXRJbmRleCsrXSA9IDM3OyAvLyAnJSdcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0Q2hhciA9IHMuY2hhckNvZGVBdCgrK2luZGV4KTtcbiAgICAgICAgaGV4TG93ID0gdW5oZXhUYWJsZVtuZXh0Q2hhcl07XG4gICAgICAgIGlmICghKGhleExvdyA+PSAwKSkge1xuICAgICAgICAgIG91dFtvdXRJbmRleCsrXSA9IDM3OyAvLyAnJSdcbiAgICAgICAgICBpbmRleC0tO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhhc0hleCA9IHRydWU7XG4gICAgICAgICAgY3VycmVudENoYXIgPSBoZXhIaWdoICogMTYgKyBoZXhMb3c7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgb3V0W291dEluZGV4KytdID0gY3VycmVudENoYXI7XG4gICAgaW5kZXgrKztcbiAgfVxuICByZXR1cm4gaGFzSGV4ID8gb3V0LnNsaWNlKDAsIG91dEluZGV4KSA6IG91dDtcbn1cblxuZnVuY3Rpb24gcXNVbmVzY2FwZShzOiBzdHJpbmcpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocyk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB1bmVzY2FwZUJ1ZmZlcihzKS50b1N0cmluZygpO1xuICB9XG59XG5cbi8qKlxuICogUGVyZm9ybXMgZGVjb2Rpbmcgb2YgVVJMIHBlcmNlbnQtZW5jb2RlZCBjaGFyYWN0ZXJzIG9uIHRoZSBnaXZlbiBgc3RyYC5cbiAqIFVzZWQgYnkgYHF1ZXJ5c3RyaW5nLnBhcnNlKClgIGFuZCBpcyBnZW5lcmFsbHkgbm90IGV4cGVjdGVkIHRvIGJlIHVzZWQgZGlyZWN0bHkuXG4gKiBJdCBpcyBleHBvcnRlZCBwcmltYXJpbHkgdG8gYWxsb3cgYXBwbGljYXRpb24gY29kZSB0byBwcm92aWRlIGEgcmVwbGFjZW1lbnQgZGVjb2RpbmcgaW1wbGVtZW50YXRpb24gaWYgbmVjZXNzYXJ5IGJ5IGFzc2lnbmluZyBgcXVlcnlzdHJpbmcudW5lc2NhcGVgIHRvIGFuIGFsdGVybmF0aXZlIGZ1bmN0aW9uLlxuICogQGxlZ2FjeVxuICogQHNlZSBUZXN0ZWQgaW4gYHRlc3QtcXVlcnlzdHJpbmctZXNjYXBlLmpzYFxuICovXG5leHBvcnQgY29uc3QgdW5lc2NhcGUgPSBxc1VuZXNjYXBlO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHBhcnNlLFxuICBzdHJpbmdpZnksXG4gIGRlY29kZSxcbiAgZW5jb2RlLFxuICB1bmVzY2FwZSxcbiAgZXNjYXBlLFxuICB1bmVzY2FwZUJ1ZmZlcixcbn07XG4iXX0=