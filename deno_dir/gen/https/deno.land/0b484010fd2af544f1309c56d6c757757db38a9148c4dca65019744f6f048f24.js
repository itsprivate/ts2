import { promisify } from "./internal/util.js";
import { callbackify } from "./_util/_util_callbackify.ts";
import { debuglog } from "./_util/_debuglog.ts";
import { deprecate } from "./internal/util.js";
import { format, formatWithOptions, inspect, stripVTControlCharacters, } from "./internal/util/inspect.js";
import { ERR_INVALID_ARG_TYPE, ERR_OUT_OF_RANGE, errorMap } from "./_errors.ts";
import types from "./util/types.js";
import { Buffer } from "./buffer.ts";
import { isDeepStrictEqual } from "./internal/util/comparisons.ts";
export { callbackify, debuglog, deprecate, format, formatWithOptions, inspect, promisify, stripVTControlCharacters, types, };
const NumberIsSafeInteger = Number.isSafeInteger;
export function isArray(value) {
    return Array.isArray(value);
}
export function isBoolean(value) {
    return typeof value === "boolean" || value instanceof Boolean;
}
export function isNull(value) {
    return value === null;
}
export function isNullOrUndefined(value) {
    return value === null || value === undefined;
}
export function isNumber(value) {
    return typeof value === "number" || value instanceof Number;
}
export function isString(value) {
    return typeof value === "string" || value instanceof String;
}
export function isSymbol(value) {
    return typeof value === "symbol";
}
export function isUndefined(value) {
    return value === undefined;
}
export function isObject(value) {
    return value !== null && typeof value === "object";
}
export function isError(e) {
    return e instanceof Error;
}
export function isFunction(value) {
    return typeof value === "function";
}
export function isRegExp(value) {
    return types.isRegExp(value);
}
export function isDate(value) {
    return types.isDate(value);
}
export function isPrimitive(value) {
    return (value === null || (typeof value !== "object" && typeof value !== "function"));
}
export function isBuffer(value) {
    return Buffer.isBuffer(value);
}
export function _extend(target, source) {
    if (source === null || typeof source !== "object")
        return target;
    const keys = Object.keys(source);
    let i = keys.length;
    while (i--) {
        target[keys[i]] = source[keys[i]];
    }
    return target;
}
export function getSystemErrorName(code) {
    if (typeof code !== "number") {
        throw new ERR_INVALID_ARG_TYPE("err", "number", code);
    }
    if (code >= 0 || !NumberIsSafeInteger(code)) {
        throw new ERR_OUT_OF_RANGE("err", "a negative integer", code);
    }
    return errorMap.get(code)?.[0];
}
export function inherits(ctor, superCtor) {
    if (ctor === undefined || ctor === null) {
        throw new ERR_INVALID_ARG_TYPE("ctor", "Function", ctor);
    }
    if (superCtor === undefined || superCtor === null) {
        throw new ERR_INVALID_ARG_TYPE("superCtor", "Function", superCtor);
    }
    if (superCtor.prototype === undefined) {
        throw new ERR_INVALID_ARG_TYPE("superCtor.prototype", "Object", superCtor.prototype);
    }
    Object.defineProperty(ctor, "super_", {
        value: superCtor,
        writable: true,
        configurable: true,
    });
    Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}
import { _TextDecoder, _TextEncoder } from "./_utils.ts";
export const TextDecoder = _TextDecoder;
export const TextEncoder = _TextEncoder;
function pad(n) {
    return n.toString().padStart(2, "0");
}
const months = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec",
];
function timestamp() {
    const d = new Date();
    const t = [
        pad(d.getHours()),
        pad(d.getMinutes()),
        pad(d.getSeconds()),
    ].join(":");
    return `${(d.getDate())} ${months[(d).getMonth()]} ${t}`;
}
function log(...args) {
    console.log("%s - %s", timestamp(), format(...args));
}
export default {
    format,
    formatWithOptions,
    inspect,
    isArray,
    isBoolean,
    isNull,
    isNullOrUndefined,
    isNumber,
    isString,
    isSymbol,
    isUndefined,
    isObject,
    isError,
    isFunction,
    isRegExp,
    isDate,
    isPrimitive,
    isBuffer,
    _extend,
    getSystemErrorName,
    deprecate,
    callbackify,
    promisify,
    inherits,
    types,
    stripVTControlCharacters,
    TextDecoder,
    TextEncoder,
    log,
    debuglog,
    isDeepStrictEqual,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDaEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQy9DLE9BQU8sRUFDTCxNQUFNLEVBQ04saUJBQWlCLEVBQ2pCLE9BQU8sRUFDUCx3QkFBd0IsR0FDekIsTUFBTSw0QkFBNEIsQ0FBQztBQUNwQyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ2hGLE9BQU8sS0FBSyxNQUFNLGlCQUFpQixDQUFDO0FBQ3BDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDckMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFbkUsT0FBTyxFQUNMLFdBQVcsRUFDWCxRQUFRLEVBQ1IsU0FBUyxFQUNULE1BQU0sRUFDTixpQkFBaUIsRUFDakIsT0FBTyxFQUNQLFNBQVMsRUFDVCx3QkFBd0IsRUFDeEIsS0FBSyxHQUNOLENBQUM7QUFFRixNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUM7QUFHakQsTUFBTSxVQUFVLE9BQU8sQ0FBQyxLQUFjO0lBQ3BDLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM5QixDQUFDO0FBR0QsTUFBTSxVQUFVLFNBQVMsQ0FBQyxLQUFjO0lBQ3RDLE9BQU8sT0FBTyxLQUFLLEtBQUssU0FBUyxJQUFJLEtBQUssWUFBWSxPQUFPLENBQUM7QUFDaEUsQ0FBQztBQUdELE1BQU0sVUFBVSxNQUFNLENBQUMsS0FBYztJ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O0lBQ3hCLFdBQVc7SUFDWCxXQUFXO0lBQ1gsR0FBRztJQUNILFFBQVE7SUFDUixpQkFBaUI7Q0FDbEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjEgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tIFwiLi9pbnRlcm5hbC91dGlsLmpzXCI7XG5pbXBvcnQgeyBjYWxsYmFja2lmeSB9IGZyb20gXCIuL191dGlsL191dGlsX2NhbGxiYWNraWZ5LnRzXCI7XG5pbXBvcnQgeyBkZWJ1Z2xvZyB9IGZyb20gXCIuL191dGlsL19kZWJ1Z2xvZy50c1wiO1xuaW1wb3J0IHsgZGVwcmVjYXRlIH0gZnJvbSBcIi4vaW50ZXJuYWwvdXRpbC5qc1wiO1xuaW1wb3J0IHtcbiAgZm9ybWF0LFxuICBmb3JtYXRXaXRoT3B0aW9ucyxcbiAgaW5zcGVjdCxcbiAgc3RyaXBWVENvbnRyb2xDaGFyYWN0ZXJzLFxufSBmcm9tIFwiLi9pbnRlcm5hbC91dGlsL2luc3BlY3QuanNcIjtcbmltcG9ydCB7IEVSUl9JTlZBTElEX0FSR19UWVBFLCBFUlJfT1VUX09GX1JBTkdFLCBlcnJvck1hcCB9IGZyb20gXCIuL19lcnJvcnMudHNcIjtcbmltcG9ydCB0eXBlcyBmcm9tIFwiLi91dGlsL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiLi9idWZmZXIudHNcIjtcbmltcG9ydCB7IGlzRGVlcFN0cmljdEVxdWFsIH0gZnJvbSBcIi4vaW50ZXJuYWwvdXRpbC9jb21wYXJpc29ucy50c1wiO1xuXG5leHBvcnQge1xuICBjYWxsYmFja2lmeSxcbiAgZGVidWdsb2csXG4gIGRlcHJlY2F0ZSxcbiAgZm9ybWF0LFxuICBmb3JtYXRXaXRoT3B0aW9ucyxcbiAgaW5zcGVjdCxcbiAgcHJvbWlzaWZ5LFxuICBzdHJpcFZUQ29udHJvbENoYXJhY3RlcnMsXG4gIHR5cGVzLFxufTtcblxuY29uc3QgTnVtYmVySXNTYWZlSW50ZWdlciA9IE51bWJlci5pc1NhZmVJbnRlZ2VyO1xuXG4vKiogQGRlcHJlY2F0ZWQgLSB1c2UgYEFycmF5LmlzQXJyYXkoKWAgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5KHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIGB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHZhbHVlIGluc3RhbmNlb2YgQm9vbGVhbmAgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWU6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBCb29sZWFuO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgLSB1c2UgYHZhbHVlID09PSBudWxsYCBpbnN0ZWFkLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgPT09IG51bGw7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAtIHVzZSBgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZGAgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZCh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIGB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBOdW1iZXJgIGluc3RlYWQuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsdWU6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiB8fCB2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIGB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmdgIGluc3RlYWQuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWU6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZztcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIGB0eXBlb2YgdmFsdWUgPT09IFwic3ltYm9sXCJgIGluc3RlYWQuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTeW1ib2wodmFsdWU6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzeW1ib2xcIjtcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIGB2YWx1ZSA9PT0gdW5kZWZpbmVkYCBpbnN0ZWFkLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB7XG4gIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgLSB1c2UgYHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcImAgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgLSB1c2UgYGUgaW5zdGFuY2VvZiBFcnJvcmAgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Vycm9yKGU6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkIC0gdXNlIGB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cImAgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqIEBkZXByZWNhdGVkIFVzZSB1dGlsLnR5cGVzLlJlZ0V4cCgpIGluc3RlYWQuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZWdFeHAodmFsdWU6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVzLmlzUmVnRXhwKHZhbHVlKTtcbn1cblxuLyoqIEBkZXByZWNhdGVkIFVzZSB1dGlsLnR5cGVzLmlzRGF0ZSgpIGluc3RlYWQuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlcy5pc0RhdGUodmFsdWUpO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgLSB1c2UgYHZhbHVlID09PSBudWxsIHx8ICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpYCBpbnN0ZWFkLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgdmFsdWUgPT09IG51bGwgfHwgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIilcbiAgKTtcbn1cblxuLyoqIEBkZXByZWNhdGVkICBVc2UgQnVmZmVyLmlzQnVmZmVyKCkgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0J1ZmZlcih2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKHZhbHVlKTtcbn1cblxuLyoqIEBkZXByZWNhdGVkIFVzZSBPYmplY3QuYXNzaWduKCkgaW5zdGVhZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZXh0ZW5kKFxuICB0YXJnZXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBzb3VyY2U6IHVua25vd24sXG4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIHNvdXJjZSBpc24ndCBhbiBvYmplY3RcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCB8fCB0eXBlb2Ygc291cmNlICE9PSBcIm9iamVjdFwiKSByZXR1cm4gdGFyZ2V0O1xuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UhKTtcbiAgbGV0IGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRhcmdldFtrZXlzW2ldXSA9IChzb3VyY2UgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHN5c3RlbSBlcnJvciBuYW1lIGZyb20gYW4gZXJyb3IgY29kZSBudW1iZXIuXG4gKiBAcGFyYW0gY29kZSBlcnJvciBjb2RlIG51bWJlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3lzdGVtRXJyb3JOYW1lKGNvZGU6IG51bWJlcik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICh0eXBlb2YgY29kZSAhPT0gXCJudW1iZXJcIikge1xuICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRShcImVyclwiLCBcIm51bWJlclwiLCBjb2RlKTtcbiAgfVxuICBpZiAoY29kZSA+PSAwIHx8ICFOdW1iZXJJc1NhZmVJbnRlZ2VyKGNvZGUpKSB7XG4gICAgdGhyb3cgbmV3IEVSUl9PVVRfT0ZfUkFOR0UoXCJlcnJcIiwgXCJhIG5lZ2F0aXZlIGludGVnZXJcIiwgY29kZSk7XG4gIH1cbiAgcmV0dXJuIGVycm9yTWFwLmdldChjb2RlKT8uWzBdO1xufVxuXG4vKipcbiAqIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvdXRpbC5odG1sI3V0aWxfdXRpbF9pbmhlcml0c19jb25zdHJ1Y3Rvcl9zdXBlcmNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZSBwcm90b3R5cGUuXG4gKiBAcGFyYW0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0czxULCBVPihcbiAgY3RvcjogbmV3ICguLi5hcmdzOiB1bmtub3duW10pID0+IFQsXG4gIHN1cGVyQ3RvcjogbmV3ICguLi5hcmdzOiB1bmtub3duW10pID0+IFUsXG4pIHtcbiAgaWYgKGN0b3IgPT09IHVuZGVmaW5lZCB8fCBjdG9yID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKFwiY3RvclwiLCBcIkZ1bmN0aW9uXCIsIGN0b3IpO1xuICB9XG5cbiAgaWYgKHN1cGVyQ3RvciA9PT0gdW5kZWZpbmVkIHx8IHN1cGVyQ3RvciA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRShcInN1cGVyQ3RvclwiLCBcIkZ1bmN0aW9uXCIsIHN1cGVyQ3Rvcik7XG4gIH1cblxuICBpZiAoc3VwZXJDdG9yLnByb3RvdHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKFxuICAgICAgXCJzdXBlckN0b3IucHJvdG90eXBlXCIsXG4gICAgICBcIk9iamVjdFwiLFxuICAgICAgc3VwZXJDdG9yLnByb3RvdHlwZSxcbiAgICApO1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdG9yLCBcInN1cGVyX1wiLCB7XG4gICAgdmFsdWU6IHN1cGVyQ3RvcixcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gIH0pO1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2YoY3Rvci5wcm90b3R5cGUsIHN1cGVyQ3Rvci5wcm90b3R5cGUpO1xufVxuXG5pbXBvcnQgeyBfVGV4dERlY29kZXIsIF9UZXh0RW5jb2RlciB9IGZyb20gXCIuL191dGlscy50c1wiO1xuXG4vKiogVGhlIGdsb2JhbCBUZXh0RGVjb2RlciAqL1xuZXhwb3J0IHR5cGUgVGV4dERlY29kZXIgPSBpbXBvcnQoXCIuL191dGlscy50c1wiKS5fVGV4dERlY29kZXI7XG5leHBvcnQgY29uc3QgVGV4dERlY29kZXIgPSBfVGV4dERlY29kZXI7XG5cbi8qKiBUaGUgZ2xvYmFsIFRleHRFbmNvZGVyICovXG5leHBvcnQgdHlwZSBUZXh0RW5jb2RlciA9IGltcG9ydChcIi4vX3V0aWxzLnRzXCIpLl9UZXh0RW5jb2RlcjtcbmV4cG9ydCBjb25zdCBUZXh0RW5jb2RlciA9IF9UZXh0RW5jb2RlcjtcblxuZnVuY3Rpb24gcGFkKG46IG51bWJlcikge1xuICByZXR1cm4gbi50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbn1cblxuY29uc3QgbW9udGhzID0gW1xuICBcIkphblwiLFxuICBcIkZlYlwiLFxuICBcIk1hclwiLFxuICBcIkFwclwiLFxuICBcIk1heVwiLFxuICBcIkp1blwiLFxuICBcIkp1bFwiLFxuICBcIkF1Z1wiLFxuICBcIlNlcFwiLFxuICBcIk9jdFwiLFxuICBcIk5vdlwiLFxuICBcIkRlY1wiLFxuXTtcblxuLyoqXG4gKiBAcmV0dXJucyAyNiBGZWIgMTY6MTk6MzRcbiAqL1xuZnVuY3Rpb24gdGltZXN0YW1wKCk6IHN0cmluZyB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCB0ID0gW1xuICAgIHBhZChkLmdldEhvdXJzKCkpLFxuICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgcGFkKGQuZ2V0U2Vjb25kcygpKSxcbiAgXS5qb2luKFwiOlwiKTtcbiAgcmV0dXJuIGAkeyhkLmdldERhdGUoKSl9ICR7bW9udGhzWyhkKS5nZXRNb250aCgpXX0gJHt0fWA7XG59XG5cbi8qKlxuICogTG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIGxvZyguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICBjb25zb2xlLmxvZyhcIiVzIC0gJXNcIiwgdGltZXN0YW1wKCksIGZvcm1hdCguLi5hcmdzKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZm9ybWF0LFxuICBmb3JtYXRXaXRoT3B0aW9ucyxcbiAgaW5zcGVjdCxcbiAgaXNBcnJheSxcbiAgaXNCb29sZWFuLFxuICBpc051bGwsXG4gIGlzTnVsbE9yVW5kZWZpbmVkLFxuICBpc051bWJlcixcbiAgaXNTdHJpbmcsXG4gIGlzU3ltYm9sLFxuICBpc1VuZGVmaW5lZCxcbiAgaXNPYmplY3QsXG4gIGlzRXJyb3IsXG4gIGlzRnVuY3Rpb24sXG4gIGlzUmVnRXhwLFxuICBpc0RhdGUsXG4gIGlzUHJpbWl0aXZlLFxuICBpc0J1ZmZlcixcbiAgX2V4dGVuZCxcbiAgZ2V0U3lzdGVtRXJyb3JOYW1lLFxuICBkZXByZWNhdGUsXG4gIGNhbGxiYWNraWZ5LFxuICBwcm9taXNpZnksXG4gIGluaGVyaXRzLFxuICB0eXBlcyxcbiAgc3RyaXBWVENvbnRyb2xDaGFyYWN0ZXJzLFxuICBUZXh0RGVjb2RlcixcbiAgVGV4dEVuY29kZXIsXG4gIGxvZyxcbiAgZGVidWdsb2csXG4gIGlzRGVlcFN0cmljdEVxdWFsLFxufTtcbiJdfQ==