if: true
sources:
  - from: https://deno.land/x/denoflow@0.0.34/sources/rss.ts
    args:
      # - https://actionsflow.github.io/test-page/hn-rss.xml
      - https://blackgnu.net/atom.xml
    limit: 50
  - from: https://deno.land/x/denoflow@0.0.34/sources/rss.ts
    args:
      - https://www.currentaffairs.org/feed
    limit: 50
  - from: https://deno.land/x/denoflow@0.0.34/sources/rss.ts
    args:
      - https://cacm.acm.org/magazine.rss
    limit: 50

steps:
  - from: ../../common/format-rss.ts
    args:
      - ${{ctx.item}}
      - myrss
      - ${{ctx.itemSourceOptions}}
  - from: https://deno.land/std@0.121.0/fs/mod.ts
    use: ensureFile
    args:
      - ${{ctx.result.path}}
    run: |
      console.log('Write json to: ',ctx.steps[0].result.path);
      Deno.writeTextFileSync(ctx.steps[0].result.path, JSON.stringify(ctx.steps[0].result.item,null,2));
